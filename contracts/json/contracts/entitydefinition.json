{
  "$defs": {
    "EntityField": {
      "description": "Definition of a single entity field",
      "properties": {
        "name": {
          "minLength": 1,
          "title": "Name",
          "type": "string"
        },
        "type": {
          "$ref": "#/$defs/FieldType"
        },
        "annotations": {
          "anyOf": [
            {
              "$ref": "#/$defs/FieldAnnotations"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        }
      },
      "required": [
        "name",
        "type"
      ],
      "title": "EntityField",
      "type": "object"
    },
    "FieldAnnotations": {
      "description": "Annotations for entity fields",
      "properties": {
        "required": {
          "default": true,
          "title": "Required",
          "type": "boolean"
        },
        "unique": {
          "default": false,
          "title": "Unique",
          "type": "boolean"
        },
        "generated": {
          "default": false,
          "title": "Generated",
          "type": "boolean"
        },
        "min_length": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Min Length"
        },
        "max_length": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Max Length"
        },
        "pattern": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Pattern"
        },
        "min": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Min"
        },
        "max": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Max"
        },
        "default": {
          "anyOf": [
            {},
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Default"
        },
        "description": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Description"
        }
      },
      "title": "FieldAnnotations",
      "type": "object"
    },
    "FieldType": {
      "description": "Supported field types in contracts",
      "enum": [
        "UUID",
        "String",
        "Text",
        "Email",
        "URL",
        "Phone",
        "Money",
        "Int",
        "Integer",
        "Float",
        "Decimal",
        "Number",
        "Boolean",
        "Date",
        "DateTime",
        "Timestamp",
        "JSON",
        "Array"
      ],
      "title": "FieldType",
      "type": "string"
    }
  },
  "description": "Complete entity definition",
  "properties": {
    "name": {
      "minLength": 1,
      "title": "Name",
      "type": "string"
    },
    "description": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Description"
    },
    "fields": {
      "items": {
        "$ref": "#/$defs/EntityField"
      },
      "title": "Fields",
      "type": "array"
    }
  },
  "required": [
    "name",
    "fields"
  ],
  "title": "EntityDefinition",
  "type": "object"
}