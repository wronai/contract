# Contract Refactoring Specification
# Generated by Code2Logic Integration
# Project: src/python/reclapp

contract_metadata:
  version: '1.0'
  type: refactoring_spec
  total_files: 23
  total_lines: 6071
  languages: ['python']

duplicates:
  - hash: 39cec4af
    suggestion: "Extract to shared utility function"
    effort: low
    functions:
      - "generator/code_generator.py::CodeGenerator.set_llm_client"
      - "generator/contract_generator.py::ContractGenerator.set_llm_client"
  - hash: 84d6e963
    suggestion: "Extract to shared utility function"
    effort: low
    functions:
      - "llm/manager.py::LLMManager.__init__"
      - "evolution/shell_renderer.py::ShellRenderer.__init__"
      - "evolution/task_queue.py::TaskQueue.__init__"
  - hash: 3a113a53
    suggestion: "Extract to shared utility function"
    effort: low
    functions:
      - "llm/manager.py::LLMManager.is_available"
      - "llm/ollama.py::OllamaClient.is_available"
      - "llm/provider.py::LLMProvider.is_available"
  - hash: 6c24c540
    suggestion: "Extract to shared utility function"
    effort: low
    functions:
      - "llm/manager.py::LLMManager.close"
      - "llm/ollama.py::OllamaClient.close"
  - hash: b955f41d
    suggestion: "Extract to shared utility function"
    effort: low
    functions:
      - "llm/manager.py::LLMManager.__aenter__"
      - "llm/ollama.py::OllamaClient.__aenter__"
  - hash: 70d7f444
    suggestion: "Extract to shared utility function"
    effort: low
    functions:
      - "llm/manager.py::LLMManager.__aexit__"
      - "llm/ollama.py::OllamaClient.__aexit__"
  - hash: 92a3bf90
    suggestion: "Extract to shared utility function"
    effort: low
    functions:
      - "llm/ollama.py::OllamaClient.name"
      - "llm/provider.py::LLMProvider.name"
  - hash: 1bbfd0f3
    suggestion: "Extract to shared utility function"
    effort: low
    functions:
      - "llm/ollama.py::OllamaClient.model"
      - "llm/provider.py::LLMProvider.model"
  - hash: 976cad73
    suggestion: "Extract to shared utility function"
    effort: low
    functions:
      - "llm/ollama.py::OllamaClient.list_models"
      - "llm/provider.py::LLMProvider.list_models"
  - hash: 4bd4a985
    suggestion: "Extract to shared utility function"
    effort: low
    functions:
      - "llm/ollama.py::OllamaClient.generate"
      - "llm/provider.py::LLMProvider.generate"

quality_issues:
  - type: long_file
    severity: low
    location: "generator/code_generator.py::"
    description: "long_file: 564"
  - type: long_file
    severity: low
    location: "evolution/evolution_manager.py::"
    description: "long_file: 1000"
  - type: long_function
    severity: medium
    location: "models/contract.py::create_minimal_contract"
    description: "long_function: 55"
  - type: long_function
    severity: medium
    location: "parser/markdown_parser.py::_parse_tech_section"
    description: "long_function: 53"
  - type: long_function
    severity: medium
    location: "validation/stages.py::create_assertion_validator"
    description: "long_function: 55"
  - type: long_function
    severity: medium
    location: "validation/stages.py::create_quality_checker"
    description: "long_function: 56"

# Code Structure (from Code2Logic)
project: reclapp
statistics:
  files: 23
  lines: 6071
  languages:
    python: 23
modules:
- path: __init__.py
  language: python
  lines: 50
  imports:
  - models.ContractAI
  - models.ContractMetadata
  - models.DefinitionLayer
  - models.GenerationLayer
  - models.ValidationLayer
  - models.AppDefinition
  - models.EntityDefinition
  - models.FieldDefinition
  - models.FieldAnnotations
  - models.RelationDefinition
  exports: []
- path: generator/code_generator.py
  language: python
  lines: 564
  imports:
  - json
  - re
  - time
  - pathlib.pathlib
  - pathlib.Path
  - typing.typing
  - typing.Any
  - typing.Literal
  - typing.Optional
  - pydantic.pydantic
  exports:
  - GeneratedFile
  - CodeGeneratorOptions
  - CodeGenerationResult
  - CodeGenerator
  classes:
  - name: GeneratedFile
    bases:
    - BaseModel
    docstring: A generated file
  - name: CodeGeneratorOptions
    bases:
    - BaseModel
    docstring: Code generator options
  - name: CodeGenerationResult
    bases:
    - BaseModel
    docstring: Result of code generation
  - name: CodeGenerator
    bases: []
    docstring: "Code generator using LLM.\n    \n    Generates application code from ContractAI sp"
    methods:
    - name: __init__
      signature: (self,options:Optional[CodeGeneratorOptions])
      intent: creates
    - name: set_llm_client
      signature: (self,client:LLMProvider)->None
      intent: the LLM client for generation
    - name: generate
      signature: (self,contract:dict[str, Any],output_dir:Optional[str])->CodeGenerationResult
      intent: Generate application code from contract.
    - name: 'e_json(self, app_name:'
      signature: '(str,,ackend: :ct),> str:

        :    )->Gen'
      intent: age.json"""
    - name: 'file(self, contract:'
      signature: '(dict,backend::ict),> str:

        :    )->Gen'
      intent: index file"""
    - name: '_model(self, entity: d'
      signature: "(ct, ,nguage:str),> str:\n :   )->Gen"
      intent: ty model file"""
    - name: 'file(self, entity: d'
      signature: '(ct, ,i: dic: bac,nd::ict),> str:

        :    )->Gen'
      intent: e file for entity"""
    - name: "ig(self) -> str:\n "
      signature: (    )->Gen
      intent: nfig.json"""
    - name: self, contract_
      signature: "(ype:,tr) -> str:\n :   )->Map"
      intent: field type to TypeScript type"""
    - name: 'f, files: li'
      signature: '(t[Ge,rated:le], output_dir: st, -> None:

        :   )->"Wri'
      intent: ed files to disk"""
    - name: '(self, text: str'
      signature: "( -> ,t:\n :   )->Est"
      intent: n count"""
    - name: "lm(\n        self,\n"
      signature: "(ntra,tr, Any]:        output,    ) -> C:eGe)->sult:\n        \"\"\"Gen"
      intent: using LLM"""
    - name: "pt(self) -> str:\n "
      signature: (    )->Get
      intent: ompt for LLM code generation"""
    - name: 't(self, contract:'
      signature: "(dict,tr, Any]:-> str:\n      )->Bui"
      intent: for LLM code generation"""
    - name: 'nse(self, content: '
      signature: "(tr) , list[G:era)->le]:\n        \"\"\"Par"
      intent: ponse to extract generated files"""
- path: generator/__init__.py
  language: python
  lines: 32
  imports:
  - contract_generator.ContractGenerator
  - contract_generator.ContractGeneratorOptions
  - contract_generator.ContractGenerationResult
  - code_generator.CodeGenerator
  - code_generator.CodeGeneratorOptions
  - code_generator.CodeGenerationResult
  - code_generator.GeneratedFile
  - prompt_builder.PromptBuilder
  - prompt_builder.PromptTemplate
  exports: []
- path: generator/contract_generator.py
  language: python
  lines: 264
  imports:
  - json
  - re
  - time
  - typing.typing
  - typing.Any
  - typing.Literal
  - typing.Optional
  - pydantic.pydantic
  - pydantic.BaseModel
  - pydantic.Field
  exports:
  - ContractGeneratorOptions
  - ContractValidationError
  - ContractGenerationResult
  - ContractGenerator
  classes:
  - name: ContractGeneratorOptions
    bases:
    - BaseModel
    docstring: Contract generator options
  - name: ContractValidationError
    bases:
    - BaseModel
    docstring: Contract validation error
  - name: ContractGenerationResult
    bases:
    - BaseModel
    docstring: Result of contract generation
  - name: ContractGenerator
    bases: []
    docstring: "Contract AI generator with self-correction loop.\n    \n    Generates ContractAI f"
    methods:
    - name: __init__
      signature: (self,options:Optional[ContractGeneratorOptions])
      intent: creates
    - name: set_llm_client
      signature: (self,client:LLMProvider)->None
      intent: the LLM client for generation
    - name: generate
      signature: (self,user_prompt:str)->ContractGenerationResult
      intent: Generate a ContractAI from natural language prompt.
    - name: itial_prompt(self, us
      signature: "(r_pr,pt: str) ->:ene)->ptions:\n       "
      intent: initial generation prompt"""
    - name: "rrection_prompt(\n       "
      signature: "(    ,pt: str,\n  :   ,ontract: Optiona:dict],\n       ,ist[Co:ractValidationError],\n       ...+1)->ptions:\n\
        \       "
      intent: correction prompt based on previous errors"""
    - name: (self, op
      signature: '(ions,Generat:ptions) -> str:)->   '
      intent: LM and get response"""
    - name: ntract_from_response(self, re
      signature: "(pons, str) ->:pti)->dict]:\n       "
      intent: ContractAI JSON from LLM response"""
    - name: _contract(self, co
      signature: "(trac, dict) -:list)->ractValidationError]:\n       "
      intent: te contract structure"""
    - name: _tokens(self, te
      signature: '(t: s,) ->:nt:)->   '
      intent: te token count (rough approximation)"""
- path: generator/prompt_builder.py
  language: python
  lines: 114
  imports:
  - typing.typing
  - typing.Any
  - typing.Optional
  - pydantic.pydantic
  - pydantic.BaseModel
  exports:
  - PromptTemplate
  - PromptBuilder
  classes:
  - name: PromptTemplate
    bases:
    - BaseModel
    docstring: Prompt template definition
  - name: PromptBuilder
    bases: []
    docstring: "Builds prompts for LLM generation.\n    \n    Example:\n        builder = PromptBui"
    methods:
    - name: __init__
      signature: (self)
      intent: creates
    - name: _register_default_templates
      signature: (self)->None
      intent: Register default prompt templates
    - name: register_template
      signature: (self,template:PromptTemplate)->None
      intent: Register a custom template
    - name: get_template
      signature: (self,name:str)->Optional[PromptTemplate]
      intent: a template by name
    - name: build_contract_prompt
      signature: (self,user_prompt:str)->dict[str, str]
      intent: Build prompt for contract generation
    - name: build_code_prompt
      signature: (self,file_type:str,context:str)->dict[str, str]
      intent: Build prompt for code generation
    - name: build_fix_prompt
      signature: (self,code:str,errors:list[str])->dict[str, str]
      intent: Build prompt for code fixing
    - name: build_from_template
      signature: (self,template_name:str,variables:dict[str, Any])->dict[str, str]
      intent: Build prompt from named template with variables
- path: models/contract.py
  language: python
  lines: 145
  imports:
  - datetime.datetime
  - datetime.datetime
  - typing.typing
  - typing.Literal
  - typing.Optional
  - pydantic.pydantic
  - pydantic.BaseModel
  - pydantic.Field
  - definition.DefinitionLayer
  - generation.GenerationLayer
  exports:
  - ContractMetadata
  - ContractAI
  - is_valid_contract
  - has_definition_layer
  - has_generation_layer
  - has_validation_layer
  - create_minimal_contract
  classes:
  - name: ContractMetadata
    bases:
    - BaseModel
    docstring: "Contract metadata\n    \n    Example:\n        metadata = ContractMetadata(\n       "
  - name: ContractAI
    bases:
    - BaseModel
    docstring: "Contract AI - complete specification for LLM code generation\n    \n    Contract A"
  functions:
  - name: is_valid_contract
    signature: (obj:object)->bool
    intent: Check if object is a valid ContractAI
  - name: has_definition_layer
    signature: (contract:dict)->bool
    intent: Check if contract has Definition layer
  - name: has_generation_layer
    signature: (contract:dict)->bool
    intent: Check if contract has Generation layer
  - name: has_validation_layer
    signature: (contract:dict)->bool
    intent: Check if contract has Validation layer
  - name: create_minimal_contract
    signature: (name:str,version:str,entities:Optional[list[dict]])->ContractAI
    intent: a minimal ContractAI with defaults
- path: models/__init__.py
  language: python
  lines: 96
  imports:
  - definition.FieldType
  - definition.BasicFieldType
  - definition.ExtendedFieldType
  - definition.RelationType
  - definition.FieldAnnotations
  - definition.FieldDefinition
  - definition.RelationDefinition
  - definition.IndexDefinition
  - definition.EntityDefinition
  - definition.EventDefinition
  exports: []
- path: models/validation.py
  language: python
  lines: 140
  imports:
  - enum.enum
  - enum.Enum
  - typing.typing
  - typing.Any
  - typing.Literal
  - typing.Optional
  - pydantic.pydantic
  - pydantic.BaseModel
  - pydantic.Field
  exports:
  - AssertionType
  - Assertion
  - TestType
  - TestDefinition
  - StaticRule
  - QualityGate
  - AcceptanceCriteria
  - ValidationLayer
  classes:
  - name: AssertionType
    bases:
    - str
    - Enum
    docstring: Assertion types for validation
  - name: Assertion
    bases:
    - BaseModel
    docstring: "Validation assertion\n    \n    Example:\n        assertion = Assertion(\n          "
  - name: TestType
    bases:
    - str
    - Enum
    docstring: Test types
  - name: TestDefinition
    bases:
    - BaseModel
    docstring: "Test definition\n    \n    Example:\n        test = TestDefinition(\n            nam"
  - name: StaticRule
    bases:
    - BaseModel
    docstring: "Static analysis rule\n    \n    Example:\n        rule = StaticRule(\n            id"
  - name: QualityGate
    bases:
    - BaseModel
    docstring: "Quality gate definition\n    \n    Example:\n        gate = QualityGate(\n          "
  - name: AcceptanceCriteria
    bases:
    - BaseModel
    docstring: "Acceptance criteria for generated code\n    \n    Example:\n        acceptance = Ac"
  - name: ValidationLayer
    bases:
    - BaseModel
    docstring: "Layer 3: Validation - defines HOW to verify and WHEN ready\n    \n    Example:\n   "
- path: models/generation.py
  language: python
  lines: 132
  imports:
  - enum.enum
  - enum.Enum
  - typing.typing
  - typing.Any
  - typing.Literal
  - typing.Optional
  - pydantic.pydantic
  - pydantic.BaseModel
  - pydantic.Field
  exports:
  - InstructionPriority
  - Instruction
  - PatternType
  - Pattern
  - ConstraintType
  - Constraint
  - BackendTechStack
  - FrontendTechStack
  - DatabaseTechStack
  - TechStack
  classes:
  - name: InstructionPriority
    bases:
    - str
    - Enum
    docstring: Instruction priority levels
  - name: Instruction
    bases:
    - BaseModel
    docstring: "Generation instruction for LLM\n    \n    Example:\n        instruction = Instructi"
  - name: PatternType
    bases:
    - str
    - Enum
    docstring: Design pattern types
  - name: Pattern
    bases:
    - BaseModel
    docstring: "Design pattern specification\n    \n    Example:\n        pattern = Pattern(\n      "
  - name: ConstraintType
    bases:
    - str
    - Enum
    docstring: Constraint types
  - name: Constraint
    bases:
    - BaseModel
    docstring: "Generation constraint\n    \n    Example:\n        constraint = Constraint(\n       "
  - name: BackendTechStack
    bases:
    - BaseModel
    docstring: Backend technology stack configuration
  - name: FrontendTechStack
    bases:
    - BaseModel
    docstring: Frontend technology stack configuration
  - name: DatabaseTechStack
    bases:
    - BaseModel
    docstring: Database technology stack configuration
  - name: TechStack
    bases:
    - BaseModel
    docstring: "Complete technology stack configuration\n    \n    Example:\n        tech_stack = T"
  - name: GenerationLayer
    bases:
    - BaseModel
    docstring: "Layer 2: Generation - defines HOW LLM should generate code\n    \n    Example:\n   "
- path: models/definition.py
  language: python
  lines: 244
  imports:
  - enum.enum
  - enum.Enum
  - typing.typing
  - typing.Any
  - typing.Literal
  - typing.Optional
  - typing.Union
  - pydantic.pydantic
  - pydantic.BaseModel
  - pydantic.Field
  exports:
  - BasicFieldType
  - ExtendedFieldType
  - RelationType
  - FieldAnnotations
  - FieldDefinition
  - RelationDefinition
  - IndexDefinition
  - EntityDefinition
  - EventDefinition
  - WorkflowStepType
  classes:
  - name: BasicFieldType
    bases:
    - str
    - Enum
    docstring: Basic field types supported by Contract AI
  - name: ExtendedFieldType
    bases:
    - str
    - Enum
    docstring: Extended field types with validation
  - name: RelationType
    bases:
    - str
    - Enum
    docstring: Relation types between entities
  - name: FieldAnnotations
    bases:
    - BaseModel
    docstring: "Field annotations defining validation and behavior\n    \n    Example:\n        ann"
  - name: FieldDefinition
    bases:
    - BaseModel
    docstring: "Entity field definition\n    \n    Example:\n        field = FieldDefinition(\n     "
  - name: RelationDefinition
    bases:
    - BaseModel
    docstring: "Relation definition between entities\n    \n    Example:\n        relation = Relati"
  - name: IndexDefinition
    bases:
    - BaseModel
    docstring: Database index definition
  - name: EntityDefinition
    bases:
    - BaseModel
    docstring: "Domain entity definition\n    \n    Example:\n        entity = EntityDefinition(\n  "
  - name: EventDefinition
    bases:
    - BaseModel
    docstring: "Domain event definition\n    \n    Example:\n        event = EventDefinition(\n     "
  - name: WorkflowStepType
    bases:
    - str
    - Enum
    docstring: Workflow step types
  - name: WorkflowStepDefinition
    bases:
    - BaseModel
    docstring: Workflow step definition
  - name: WorkflowDefinition
    bases:
    - BaseModel
    docstring: "Workflow definition\n    \n    Example:\n        workflow = WorkflowDefinition(\n   "
  - name: ApiEndpointDefinition
    bases:
    - BaseModel
    docstring: Custom endpoint definition
  - name: ApiResourceDefinition
    bases:
    - BaseModel
    docstring: API resource definition
  - name: ApiAuthentication
    bases:
    - BaseModel
    docstring: API authentication configuration
  - name: ApiDefinition
    bases:
    - BaseModel
    docstring: "API definition\n    \n    Example:\n        api = ApiDefinition(\n            versio"
  - name: AppDefinition
    bases:
    - BaseModel
    docstring: "Application definition\n    \n    Example:\n        app = AppDefinition(\n          "
  - name: DefinitionLayer
    bases:
    - BaseModel
    docstring: "Layer 1: Definition - defines WHAT to implement\n    \n    Example:\n        defini"
- path: llm/manager.py
  language: python
  lines: 181
  imports:
  - os
  - typing.typing
  - typing.Optional
  - provider.LLMProvider
  - provider.LLMResponse
  - provider.GenerateOptions
  - provider.LLMProviderStatus
  - provider.LLMModelInfo
  - ollama.OllamaClient
  - ollama.OllamaConfig
  exports:
  - ProviderInfo
  - LLMManager
  classes:
  - name: ProviderInfo
    bases: []
    docstring: Information about a configured provider
    methods:
    - name: __init__
      signature: (self,name:str,status:LLMProviderStatus,provider:Optional[LLMProvider])
      intent: creates
  - name: LLMManager
    bases: []
    docstring: "LLM Manager with multi-provider support.\n    \n    Manages multiple LLM providers"
    methods:
    - name: __init__
      signature: (self,verbose:bool)
      intent: creates
    - name: is_available
      signature: (self)->bool
      intent: Check if any provider is available
    - name: is_ready
      signature: (self)->bool
      intent: Check if manager is initialized and has available provider
    - name: get_provider
      signature: (self)->Optional[LLMProvider]
      intent: the primary available provider
    - name: primary_provider
      signature: (self)->Optional[LLMProvider]
      intent: the primary (first available) provider
    - name: providers
      signature: (self)->dict[str, ProviderInfo]
      intent: all provider info
    - name: initialize
      signature: (self)->None
      intent: Initialize all configured providers
    - name: _init_ollama
      signature: (self)->None
      intent: Initialize Ollama provider
    - name: _init_openrouter
      signature: (self)->None
      intent: Initialize OpenRouter provider if API key is set
    - name: add_provider
      signature: (self,name:str,provider:LLMProvider)->None
      intent: Add a custom provider
    - name: generate
      signature: (self,options:GenerateOptions,provider_name:Optional[str])->LLMResponse
      intent: Generate completion using available provider.
    - name: generate_with_fallback
      signature: (self,options:GenerateOptions,providers:Optional[list[str]])->LLMResponse
      intent: Generate with fallback to other providers on failure.
    - name: get_status
      signature: (self)->dict
      intent: status of all providers
    - name: close
      signature: (self)->None
      intent: Close all provider connections
    - name: __aenter__
      signature: (self)
      intent: aenter
- path: llm/ollama.py
  language: python
  lines: 150
  imports:
  - os
  - time
  - typing.typing
  - typing.Optional
  - httpx
  - pydantic.pydantic
  - pydantic.BaseModel
  - provider.LLMProvider
  - provider.LLMResponse
  - provider.GenerateOptions
  exports:
  - OllamaConfig
  - OllamaClient
  classes:
  - name: OllamaConfig
    bases:
    - BaseModel
    docstring: Ollama configuration
  - name: OllamaClient
    bases:
    - LLMProvider
    docstring: "Ollama LLM Client\n    \n    Example:\n        client = OllamaClient()\n        if a"
    methods:
    - name: __init__
      signature: (self,config:Optional[OllamaConfig])
      intent: creates
    - name: name
      signature: (self)->str
      intent: name
    - name: model
      signature: (self)->str
      intent: model
    - name: is_available
      signature: (self)->bool
      intent: Check if Ollama is running
    - name: list_models
      signature: (self)->list[LLMModelInfo]
      intent: List available Ollama models
    - name: has_model
      signature: (self,model_name:Optional[str])->bool
      intent: Check if model is available
    - name: generate
      signature: (self,options:GenerateOptions)->LLMResponse
      intent: Generate completion using Ollama.
    - name: _sleep
      signature: (self,attempt:int)
      intent: Exponential backoff sleep
    - name: close
      signature: (self)
      intent: Close HTTP client
    - name: __aenter__
      signature: (self)
      intent: aenter
    - name: __aexit__
      signature: (self)
      intent: aexit
- path: llm/__init__.py
  language: python
  lines: 19
  imports:
  - provider.LLMProvider
  - provider.LLMResponse
  - provider.GenerateOptions
  - ollama.OllamaClient
  - ollama.OllamaConfig
  - manager.LLMManager
  exports: []
- path: llm/provider.py
  language: python
  lines: 82
  imports:
  - abc.abc
  - abc.ABC
  - abc.abstractmethod
  - enum.enum
  - enum.Enum
  - typing.typing
  - typing.Any
  - typing.Literal
  - typing.Optional
  - pydantic.pydantic
  exports:
  - LLMProviderStatus
  - GenerateOptions
  - LLMResponse
  - LLMModelInfo
  - LLMProvider
  classes:
  - name: LLMProviderStatus
    bases:
    - str
    - Enum
    docstring: Provider status
  - name: GenerateOptions
    bases:
    - BaseModel
    docstring: Options for LLM generation
  - name: LLMResponse
    bases:
    - BaseModel
    docstring: Response from LLM generation
  - name: LLMModelInfo
    bases:
    - BaseModel
    docstring: Information about an available model
  - name: LLMProvider
    bases:
    - ABC
    docstring: "Abstract base class for LLM providers.\n    \n    Implementations must provide:\n  "
    methods:
    - name: name
      signature: (self)->str
      intent: Provider name
    - name: model
      signature: (self)->str
      intent: Current model name
    - name: is_available
      signature: (self)->bool
      intent: Check if provider is available
    - name: list_models
      signature: (self)->list[LLMModelInfo]
      intent: List available models
    - name: generate
      signature: (self,options:GenerateOptions)->LLMResponse
      intent: Generate completion
    - name: has_model
      signature: (self,model_name:str)->bool
      intent: Check if specific model is available
    - name: get_code_models
      signature: (self,models:list[LLMModelInfo])->list[LLMModelInfo]
      intent: Filter models suitable for code generation
- path: parser/__init__.py
  language: python
  lines: 19
  imports:
  - markdown_parser.parse_contract_markdown
  - markdown_parser.validate_contract
  - markdown_parser.ContractMarkdown
  - markdown_parser.ContractFrontmatter
  - markdown_parser.MarkdownEntityDefinition
  exports: []
- path: parser/markdown_parser.py
  language: python
  lines: 409
  imports:
  - json
  - re
  - typing.typing
  - typing.Any
  - typing.Literal
  - typing.Optional
  - yaml
  - pydantic.pydantic
  - pydantic.BaseModel
  - pydantic.Field
  exports:
  - EntityField
  - MarkdownEntityDefinition
  - ApiEndpoint
  - MarkdownAssertion
  - TestCase
  - AcceptanceScenario
  - AcceptanceTest
  - ContractFrontmatter
  - BackendTech
  - FrontendTech
  classes:
  - name: EntityField
    bases:
    - BaseModel
    docstring: Entity field from markdown table
  - name: MarkdownEntityDefinition
    bases:
    - BaseModel
    docstring: Entity definition parsed from markdown
  - name: ApiEndpoint
    bases:
    - BaseModel
    docstring: API endpoint definition
  - name: MarkdownAssertion
    bases:
    - BaseModel
    docstring: Business rule assertion
  - name: TestCase
    bases:
    - BaseModel
    docstring: API test case
  - name: AcceptanceScenario
    bases:
    - BaseModel
    docstring: Gherkin scenario
  - name: AcceptanceTest
    bases:
    - BaseModel
    docstring: Gherkin feature with scenarios
  - name: ContractFrontmatter
    bases:
    - BaseModel
    docstring: YAML frontmatter from contract.md
  - name: BackendTech
    bases:
    - BaseModel
    docstring: Backend technology configuration
  - name: FrontendTech
    bases:
    - BaseModel
    docstring: Frontend technology configuration
  - name: DatabaseTech
    bases:
    - BaseModel
    docstring: Database configuration
  - name: TechStack
    bases:
    - BaseModel
    docstring: Complete tech stack
  - name: AppDefinition
    bases:
    - BaseModel
    docstring: App definition from markdown
  - name: ApiDefinition
    bases:
    - BaseModel
    docstring: API definition from markdown
  - name: RulesDefinition
    bases:
    - BaseModel
    docstring: Business rules definition
  - name: TestsDefinition
    bases:
    - BaseModel
    docstring: Tests definition
  - name: ContractMarkdown
    bases:
    - BaseModel
    docstring: Complete parsed contract markdown
  - name: ContractValidationResult
    bases:
    - BaseModel
    docstring: Validation result
  functions:
  - name: parse_contract_markdown
    signature: (content:str)->ContractMarkdown
    intent: Parse contract markdown content into ContractMarkdown structure.
  - name: _extract_frontmatter
    signature: (content:str)->tuple[ContractFrontmatter, str]
    intent: Extract YAML frontmatter from content
  - name: _parse_app_section
    signature: (body:str)->AppDefinition
    intent: 'Parse ## App Definition section'
  - name: _parse_entities_section
    signature: (body:str)->list[MarkdownEntityDefinition]
    intent: 'Parse ## Entities section'
  - name: _parse_entity_content
    signature: (name:str,content:str)->MarkdownEntityDefinition
    intent: Parse entity content from markdown
  - name: _parse_markdown_table
    signature: (content:str)->list[EntityField]
    intent: Parse markdown table into EntityField list
  - name: _parse_field_type
    signature: (type_str:str)->FieldType
    intent: Parse field type string to FieldType
  - name: _parse_api_section
    signature: (body:str)->ApiDefinition
    intent: 'Parse ## API section'
  - name: _parse_endpoint_tables
    signature: (section:str)->list[ApiEndpoint]
    intent: Parse API endpoint tables
  - name: _parse_rules_section
    signature: (body:str)->RulesDefinition
    intent: 'Parse ## Business Rules section'
  - name: _parse_tech_section
    signature: (body:str,frontmatter:ContractFrontmatter)->TechStack
    intent: 'Parse ## Tech Stack section'
  - name: _parse_tests_section
    signature: (body:str)->TestsDefinition
    intent: 'Parse ## Tests section'
  - name: _parse_gherkin
    signature: (content:str)->list[AcceptanceTest]
    intent: Parse Gherkin format tests
  - name: _extract_section
    signature: (body:str,header:str)->str
    intent: Extract content under a markdown header
  - name: _extract_field
    signature: (section:str,label:str)->str
    intent: Extract **Label:** value from section
  - name: _extract_list_from_field
    signature: (section:str,label:str)->list[str]
    intent: Extract comma-separated list from field
  - name: _extract_checkbox_list
    signature: (section:str)->list[str]
    intent: Extract checkbox list items
  - name: validate_contract
    signature: (contract:ContractMarkdown)->ContractValidationResult
    intent: Validate parsed contract.
- path: evolution/shell_renderer.py
  language: python
  lines: 174
  imports:
  - re
  - typing.typing
  - typing.Literal
  exports:
  - ShellRenderer
  classes:
  - name: ShellRenderer
    bases: []
    docstring: "Renders colorized output in terminal.\n    \n    Supports syntax highlighting for:"
    methods:
    - name: __init__
      signature: (self,verbose:bool)
      intent: creates
    - name: heading
      signature: (self,level:int,text:str)->None
      intent: Print a heading
    - name: codeblock
      signature: (self,language:Language,content:str)->None
      intent: Print a syntax-highlighted code block
    - name: text
      signature: (self,content:str)->None
      intent: Print plain text
    - name: success
      signature: (self,message:str)->None
      intent: Print success message
    - name: ror(s
      signature: '(lf, ,ssage: :r) )->ne:

        '
      intent: Print error message"""
    - name: ing(sel
      signature: "(, me,age: st: ->)->:\n  "
      intent: rint warning message"""
    - name: f, m
      signature: '(ssag, str) -:Non)->    '
      intent: info message"""
    - name: 'ine(self, line:'
      signature: "(str,,angu:e: ,nguage) : str:\n  )-> \"\""
      intent: tax highlighting to a line"""
    - name: 'aml(self, line:'
      signature: "(str),> st:\n  )-> \"\""
      intent: YAML syntax"""
    - name: 'son(self, line:'
      signature: "(str),> st:\n  )-> \"\""
      intent: JSON syntax"""
    - name: 'ash(self, line:'
      signature: "(str),> st:\n  )-> \"\""
      intent: Bash syntax"""
    - name: 's(self, line:'
      signature: "(str),> st:\n  )-> \"\""
      intent: JavaScript/TypeScript syntax"""
    - name: 'og(self, line:'
      signature: "(str),> st:\n  )-> \"\""
      intent: log messages"""
- path: evolution/__init__.py
  language: python
  lines: 18
  imports:
  - task_queue.TaskQueue
  - task_queue.Task
  - task_queue.TaskStatus
  - shell_renderer.ShellRenderer
  - evolution_manager.EvolutionManager
  - evolution_manager.EvolutionOptions
  - evolution_manager.EvolutionResult
  exports: []
- path: evolution/task_queue.py
  language: python
  lines: 163
  imports:
  - datetime.datetime
  - datetime.datetime
  - enum.enum
  - enum.Enum
  - typing.typing
  - typing.Literal
  - typing.Optional
  - pydantic.pydantic
  - pydantic.BaseModel
  - pydantic.Field
  exports:
  - Task
  - TaskQueue
  classes:
  - name: Task
    bases:
    - BaseModel
    docstring: Task definition
  - name: TaskQueue
    bases: []
    docstring: "Task queue with status tracking and YAML output.\n    \n    Example:\n        queue"
    methods:
    - name: __init__
      signature: (self,verbose:bool)
      intent: creates
    - name: renderer
      signature: (self)->"ShellRenderer"
      intent: Lazy load renderer
    - name: add
      signature: (self,name:str,task_id:Optional[str])->Task
      intent: Add a new task to the queue
    - name: start
      signature: (self,task_id:str)->None
      intent: Mark a task as running
    - name: done
      signature: (self,task_id:str)->None
      intent: Mark a task as done
    - name: fail
      signature: (self,task_id:str,error:str)->None
      intent: Mark a task as failed
    - name: skip
      signature: (self,task_id:str)->None
      intent: Mark a task as skipped
    - name: get_task
      signature: (self,task_id:str)->Optional[Task]
      intent: task by ID
    - name: get_stats
      signature: (self)->dict[str, int]
      intent: task statistics
    - name: print
      signature: (self)->None
      intent: Print current task list
    - name: _find_task
      signature: (self,task_id:str)->Optional[Task]
      intent: Find task by ID
    - name: _print_todo_list
      signature: (self,force:bool)->None
      intent: Print task list as YAML
    - name: get_icon
      signature: (status:TaskStatus)->str
      intent: status icon
- path: evolution/evolution_manager.py
  language: python
  lines: 1000
  imports:
  - asyncio
  - json
  - os
  - signal
  - subprocess
  - time
  - pathlib.pathlib
  - pathlib.Path
  - typing.typing
  - typing.Any
  exports:
  - EvolutionOptions
  - EvolutionResult
  - EvolutionManager
  classes:
  - name: EvolutionOptions
    bases:
    - BaseModel
    docstring: Evolution manager options
  - name: EvolutionResult
    bases:
    - BaseModel
    docstring: Result of evolution run
  - name: EvolutionManager
    bases: []
    docstring: "Evolution manager with auto-healing code generation.\n    \n    Full pipeline (21 "
    methods:
    - name: __init__
      signature: (self,options:Optional[EvolutionOptions])
      intent: creates
    - name: set_llm_client
      signature: (self,client:Any)->None
      intent: the LLM client
    - name: evolve
      signature: (self,prompt:str,output_dir:Optional[str])->EvolutionResult
      intent: Run the full evolution pipeline with auto-healing.
    - name: _setup_tasks
      signature: (self)
      intent: Setup full task queue (21 tasks like TypeScript)
    - name: se_setup(sel
      signature: "(, ta,et_dir: st::\n )"
      intent: 'hase 1: Setup directories and state"""'
    - name: se_contract(sel
      signature: "(, pr,pt: st: ta,et_dir: st: ->)->onal[dict]:\n  "
      intent: 'hase 2: Generate and save contract"""'
    - name: se_code_generation(sel
      signature: "(, co,ract: di:, ta,et_dir: st: ->)->[str]:\n  "
      intent: 'hase 3: Generate code"""'
    - name: se_service(sel
      signature: "(, ta,et_dir: st: ->)->:\n  "
      intent: 'hase 4: Install deps and start service"""'
    - name: se_tests(sel
      signature: "(, ta,et_dir: st: ->)->e[int, int]:\n  "
      intent: 'hase 5: Generate and run E2E tests"""'
    - name: erate_test_fixtures(sel
      signature: "(, ta,et_dir: st::\n )"
      intent: enerate test fixture files like TypeScript"""
    - name: erate_test_config(sel
      signature: "(, ta,et_dir: st::\n )"
      intent: enerate test configuration file"""
    - name: se_additional(sel
      signature: "(, ta,et_dir: st::\n )"
      intent: 'hase 5-9: Additional generation (Database, Docker, CI/CD, Frontend, Docs)"""'
    - name: se_verification(sel
      signature: "(, ta,et_dir: st::\n )"
      intent: 'hase 10: Final verification"""'
    - name: erate_database(sel
      signature: "(, ta,et_dir: st::\n )"
      intent: enerate Prisma database schema"""
    - name: erate_frontend(sel
      signature: "(, ta,et_dir: st::\n )"
      intent: enerate React frontend"""
- path: validation/stages.py
  language: python
  lines: 340
  imports:
  - re
  - subprocess
  - typing.typing
  - typing.Any
  - pipeline.ValidationStage
  - pipeline.ValidationContext
  - pipeline.StageResult
  - pipeline.StageError
  exports:
  - create_syntax_validator
  - create_schema_validator
  - create_assertion_validator
  - create_static_analyzer
  - create_test_runner
  - create_quality_checker
  - create_security_scanner
  - create_runtime_validator
  functions:
  - name: create_syntax_validator
    signature: ()->ValidationStage
    intent: syntax validation stage.
  - name: _check_js_syntax
    signature: (filename:str,content:str)->list[StageError]
    intent: Check JavaScript/TypeScript syntax
  - name: _check_python_syntax
    signature: (filename:str,content:str)->list[StageError]
    intent: Check Python syntax using compile()
  - name: create_schema_validator
    signature: ()->ValidationStage
    intent: schema validation stage.
  - name: create_assertion_validator
    signature: ()->ValidationStage
    intent: assertion validation stage.
  - name: create_static_analyzer
    signature: ()->ValidationStage
    intent: static analysis stage.
  - name: create_test_runner
    signature: ()->ValidationStage
    intent: test runner stage.
  - name: create_quality_checker
    signature: ()->ValidationStage
    intent: quality checker stage.
  - name: create_security_scanner
    signature: ()->ValidationStage
    intent: security scanner stage.
  - name: create_runtime_validator
    signature: ()->ValidationStage
    intent: runtime validation stage.
- path: validation/__init__.py
  language: python
  lines: 70
  imports:
  - pipeline.ValidationPipeline
  - pipeline.ValidationContext
  - pipeline.ValidationStage
  - pipeline.PipelineOptions
  - pipeline.PipelineResult
  - pipeline.StageResult
  - stages.create_syntax_validator
  - stages.create_schema_validator
  - stages.create_assertion_validator
  - stages.create_static_analyzer
  exports:
  - create_default_pipeline
  functions:
  - name: create_default_pipeline
    signature: (options:dict)->"ValidationPipeline"
    intent: a configured validation pipeline with all stages.
- path: validation/pipeline.py
  language: python
  lines: 188
  imports:
  - asyncio
  - time
  - typing.typing
  - typing.Any
  - typing.Callable
  - typing.Optional
  - pydantic.pydantic
  - pydantic.BaseModel
  - pydantic.Field
  exports:
  - StageError
  - StageResult
  - PipelineResult
  - GeneratedCode
  - ValidationContext
  - ValidationStage
  - PipelineOptions
  - ValidationPipeline
  classes:
  - name: StageError
    bases:
    - BaseModel
    docstring: Error from a validation stage
  - name: StageResult
    bases:
    - BaseModel
    docstring: Result from a single validation stage
  - name: PipelineResult
    bases:
    - BaseModel
    docstring: Result from the complete validation pipeline
  - name: GeneratedCode
    bases:
    - BaseModel
    docstring: Generated code structure
  - name: ValidationContext
    bases:
    - BaseModel
    docstring: Context passed between validation stages
  - name: ValidationStage
    bases:
    - BaseModel
    docstring: Validation stage definition
  - name: PipelineOptions
    bases:
    - BaseModel
    docstring: Pipeline configuration options
  - name: ValidationPipeline
    bases: []
    docstring: "8-stage validation pipeline orchestrator.\n    \n    Example:\n        pipeline = V"
    methods:
    - name: __init__
      signature: (self,fail_fast:bool,timeout:int,verbose:bool...+1)
      intent: creates
    - name: register_stage
      signature: (self,stage:ValidationStage)->None
      intent: Register a validation stage
    - name: register_stages
      signature: (self,stages:list[ValidationStage])->None
      intent: Register multiple validation stages
    - name: validate
      signature: (self,contract:dict[str, Any],code:GeneratedCode)->PipelineResult
      intent: Run the validation pipeline.
    - name: '     self,'
      signature: "(tage,onSta:,\n        conte,tionCon:xt\n    ) -> Stage)->      \"\"\"Ru"
      intent: validation stage with timeout"""
    - name: (self) -> list[
      signature: (tr]:)->    """Ge
      intent: registered stage names"""
